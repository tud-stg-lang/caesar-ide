<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>
<plugin
   id="org.caesarj"
   name="Caesar Plug-in"
   version="0.8.5"
   provider-name="TU Darmstadt"
   class="org.caesarj.ui.CaesarPlugin">

   <runtime>
      <library name="caesar.jar">
         <export name="*"/>
      </library>
      <library name="caesar-compiler.jar">
         <export name="*"/>
      </library>
      <library name="caesar-runtime.jar">
         <export name="*"/>
      </library>
      <library name="aspectjtools.jar">
         <export name="*"/>
      </library>
      <library name="aspectjrt.jar">
         <export name="*"/>
      </library>
      <library name="cj-rmic.jar">
         <export name="*"/>
      </library>
      <library name="log4j-1.2.8.jar">
         <export name="*"/>
      </library>
   </runtime>
              
   <requires>
      <import plugin="org.eclipse.osgi"/>
      <import plugin="org.eclipse.core.resources"/>
      <import plugin="org.eclipse.core.runtime"/>
      <import plugin="org.eclipse.debug.core"/>
      <import plugin="org.eclipse.debug.ui"/>
      <import plugin="org.eclipse.help"/>
      <import plugin="org.eclipse.help.base"/>
      <import plugin="org.eclipse.jdt.core"/>
      <import plugin="org.eclipse.jdt.ui"/>
      <import plugin="org.eclipse.jface"/>
      <import plugin="org.eclipse.jface.text"/>
      <import plugin="org.eclipse.search"/>
      <import plugin="org.eclipse.swt"/>
      <import plugin="org.eclipse.text"/>
      <import plugin="org.eclipse.ui"/>
      <import plugin="org.eclipse.ui.console"/>
      <import plugin="org.eclipse.ui.editors"/>
      <import plugin="org.eclipse.ui.ide"/>
      <import plugin="org.eclipse.ui.workbench"/>
      <import plugin="org.eclipse.ui.views"/>
      <import plugin="org.eclipse.ui.workbench.texteditor"/>
      <import plugin="org.eclipse.jdt.debug.ui"/>
      <import plugin="org.eclipse.jdt.debug"/>
      <import plugin="org.eclipse.jdt.launching"/>
      <import plugin="org.eclipse.core.variables"/>
   </requires>


	<extension
		point="org.eclipse.jdt.core.classpathVariableInitializer">
		<classpathVariableInitializer
			variable="CAESAR_HOME"
			class="org.caesarj.ui.CaesarHomeInitializer">
		</classpathVariableInitializer>
	</extension>

   <extension
         point="org.eclipse.ui.newWizards">
      <category
            name="Caesar"
            id="Caesar">
      </category>
      <wizard
            name="Caesar Project"
            icon="icons/sample.gif"
            category="Caesar"
            class="org.caesarj.ui.wizard.NewCaesarProjectWizard"
            project="true"
            finalPerspective="org.caesarj.ui.perspective.CaesarPerspective"
            id="org.caesarj.newprojectwizard">
         <description>
            Create a Caesar Project
         </description>
      </wizard>
   </extension>
   <extension
         id="caesarprojectnature"
         name="caesarNature"
         point="org.eclipse.core.resources.natures">
      <runtime>
         <run
               class="org.caesarj.ui.CaesarProjectNature">
         </run>
      </runtime>
   </extension>
   <extension
         id="builder.builder"
         name="Caesar Builder"
         point="org.eclipse.core.resources.builders">
      <builder>
         <run
               class="org.caesarj.ui.builder.Builder">
         </run>
      </builder>
   </extension>
   <extension
         id="org.caesarj.editor.caesareditor"
         point="org.eclipse.ui.editors">
      <editor
            class="org.caesarj.ui.editor.CaesarEditor"
            icon="icons/sample.gif"
            default="true"
            contributorClass="org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditorActionContributor"
            name="CaesarEditor"
            id="org.caesarj.ui.editor.CaesarEditor"
            extensions="java">
      </editor>
   </extension>
   <extension
         point="org.eclipse.help.toc">
      <toc
            file="toc.xml"
            primary="true">
      </toc>
   </extension>
   <extension
         id="advicemarker"
         name="AdviceMarker"
         point="org.eclipse.core.resources.markers">
      <super type="org.eclipse.core.resources.marker"/>
      <persistent
            value="false">
      </persistent>
      <attribute
            name="org.caesarj.links">
      </attribute>
      <attribute
            name="org.caesarj.adviceid">
      </attribute>
   </extension>
   <extension point="org.eclipse.ui.editors.annotationTypes">
		<type name="org.caesarj.ui.adviceannotation" super="org.eclipse.ui.workbench.texteditor.task" markerType="org.caesarj.advicemarker" >
      </type>
   </extension>
   <extension point="org.eclipse.ui.editors.markerAnnotationSpecification">
		<specification annotationType="org.caesarj.ui.adviceannotation"  icon="icons/PointCut.gif" >
	  </specification>
	</extension>
	<extension
         point="org.eclipse.ui.ide.markerResolution">
      <markerResolutionGenerator
            markerType="org.caesarj.advicemarker"
            class="org.caesarj.ui.marker.AdviceMarkerResolutionGenerator">
      </markerResolutionGenerator>
   </extension>
	<extension
      point="org.eclipse.ui.perspectives">
   <perspective
         icon="icons/sample.gif"
         class="org.caesarj.ui.perspective.CaesarPerspective"
         name="CaesarJ"
         id="org.caesarj.ui.perspective.CaesarPerspective">
   </perspective>
   </extension>	
   
	<extension point="org.eclipse.ui.actionSets">
		<actionSet label="CaesarJ" visible="true" id="org.caesarj.actionSet">
  			<action
        		retarget="false"
        		toolbarPath="Normal/additions"
        		label="CaesarJAnnotation"
        		tooltip="CaesarJ: Enables/Disables live annotation"
        		class="org.caesarj.ui.actionsets.AnnotationShortCut"
        		icon="icons/annotation.gif"
        		style="toggle"
        		state="false"
        		id="org.caesarj.ui.actionsets.Annotation"/>
     <action
           class="org.caesarj.ui.actionsets.WeaveShortCut"
           icon="icons/advice.gif"
           id="org.caesarj.ui.actionsets.RunWeaver"
           label="CaesarJRunWeaver"
           retarget="false"
           style="toggle"
           toolbarPath="Normal/additions"
           tooltip="CaesarJ: Enables/Disables weaver"/>
		</actionSet>
	</extension>
	
   <!--extension point="org.eclipse.ui.actionSetPartAssociations">
   		<actionSetPartAssociation
   		targetID="org.caesarj.actionSet">
   		<part id="org.caesarj.ui.editor.CaesarEditor"/>
   		</actionSetPartAssociation>
   </extension-->
	<extension point="org.eclipse.ui.views">
  		<view 
  			name="%HierarchyView.main.title" 
  			icon="icons/sample.gif"
  			category="org.eclipse.jdt.ui.java"
  			class="org.caesarj.ui.views.CaesarHierarchyView"
  			id="org.caesarj.ui.views.CaesarHierarchyView" /> 
 	</extension>
 	
 	<extension point="org.eclipse.ui.preferencePages">
		<page
			name="%PreferencePages.main.title"
			class="org.caesarj.ui.preferences.CaesarJPreferencePage"
			id="org.caesarj.ui.preferences.caesarjpreferencepage">
    	</page>
	</extension>
	
	<extension
         point="org.eclipse.ui.editorActions">
      <editorContribution
            targetID="org.caesarj.ui.editor.CaesarEditor"
            id="org.eclipse.caesarj.ui.QuickFixRulerMenuAction">
         <action
			 label="%Dummy.label"
              class="org.caesarj.ui.marker.CaesarSelectRulerAction"
              actionID="RulerClick"
              id="org.caesarj.ui.marker.CaesarSelectMarkerRulerAction">
         </action>
      </editorContribution>
   </extension>
 <extension
       point="org.eclipse.ui.startup">
    <startup class="org.caesarj.ui.CaesarStartup"/>
 </extension>
 
 	<!-- Associates the caesarj ToggleBreakpoint action with the caesarj-editor. -->
 	<extension point="org.eclipse.core.runtime.adapters">
         <factory 
            class="org.caesarj.debug.actions.CjRetargettableActionAdapterFactory" 
            adaptableType="org.caesarj.ui.editor.CaesarEditor">
            <adapter type="org.eclipse.debug.ui.actions.IToggleBreakpointsTarget"/>
         </factory>
    </extension>
    
    <!-- Enables the caesarj BreakpointRulerAction for the caesarj-editor. -->
    <extension
         point="org.eclipse.ui.editorActions">
      <editorContribution
            targetID="org.caesarj.ui.editor.CaesarEditor"
            id="org.caesarj.ui.editor.BreakpointRulerActions">
         <action
               label="%Dummy.label"
               class="org.caesarj.debug.actions.CjBreakpointRulerActionDelegate"
               actionID="RulerDoubleClick"
               id="org.caesarj.debug.actions.ManageBreakpointRulerAction">
         </action>
      </editorContribution>
   </extension>
   
   <extension
         point="org.eclipse.ui.popupMenus">

	   <!-- Adds the caesarj ToggleBreakpoint action and JDTs other Breakpoint actions. -->
		<viewerContribution
            targetID="#CJCompilationUnitRulerContext"
            id="org.caesarj.debug.actions.CompilationUnitRulerPopupActions">
	         <action
	               label="%JavaBreakpointProperties.label"
	               helpContextId="breakpoint_properties_action_context"
	               class="org.eclipse.jdt.debug.ui.actions.JavaBreakpointPropertiesRulerActionDelegate"
	               menubarPath="debug"
	               id="org.eclipse.jdt.debug.ui.actions.JavaBreakpointPropertiesRulerActionDelegate">
	         </action>
	         <action
	               label="%EnableBreakpoint.label"
	               helpContextId="enable_disable_breakpoint_action_context"
	               class="org.eclipse.debug.ui.actions.RulerEnableDisableBreakpointActionDelegate"
	               menubarPath="debug"
	               id="org.eclipse.debug.ui.actions.RulerEnableDisableBreakpointActionDelegate">
	         </action>
	         <action
	               helpContextId="manage_breakpoint_action_context"
	               label="%manageBreakpointActionInRulerContextMenu"
	               class="org.caesarj.debug.actions.CjBreakpointRulerActionDelegate"
	               menubarPath="debug"
	               id="org.caesarj.debug.actions.CjBreakpointRulerActionDelegate">
	         </action>
     	 </viewerContribution>

	     <!-- Also contributing JDT UI's other ruler context menu actions to our context menu -->    
	     <viewerContribution
	            targetID="#CJCompilationUnitRulerContext"
	            id="org.eclipse.jdt.internal.ui.javaeditor.QuickFixRulerMenuAction">
	         <action
	               label="%Dummy.label"
	               helpContextId="org.eclipse.jdt.ui.quick_fix_action"
	               class="org.eclipse.jdt.internal.ui.javaeditor.JavaSelectRulerAction"
	               menubarPath="additions"
	               definitionId="org.eclipse.jdt.ui.edit.text.java.correction.assist.proposals"
	               id="org.eclipse.jdt.internal.ui.javaeditor.JavaSelectRulerMenuAction">
	         </action>
	      </viewerContribution>
	           <viewerContribution
	            targetID="#CJCompilationUnitRulerContext"
	            id="org.eclipse.jdt.ui.CompilationUnitEditorPopupActions">
	         <action
	               label="%AddTask.label"
	               helpContextId="org.eclipse.ui.AddTask_action_context"
	               tooltip="%AddTask.tooltip"
	               class="org.eclipse.ui.texteditor.TaskRulerAction"
               menubarPath="add"
               id="org.eclipse.ui.texteditor.TaskRulerAction">
         </action>
         <action
               label="%AddBookmark.label"
               helpContextId="org.eclipse.ui.bookmark_action_context"
               tooltip="%AddBookmark.tooltip"
               class="org.eclipse.ui.texteditor.BookmarkRulerAction"
               menubarPath="add"
               id="org.eclipse.ui.texteditor.BookmarkRulerAction">
         </action>
         <menu
			id="projection"
			label="%Folding.label"
			path="rest">
		 </menu>
         <action
               label="%Dummy.label"
               tooltip="%Dummy.label"
               class="org.eclipse.jdt.ui.actions.FoldingExpandAllRulerAction"
               menubarPath="projection/additions"
               definitionId="org.eclipse.ui.edit.text.folding.expand_all"
               id="org.eclipse.jdt.ui.folding.expandAll">
         </action>
         <action
               label="%Dummy.label"
               tooltip="%Dummy.label"
               class="org.eclipse.jdt.internal.ui.actions.FoldingToggleRulerAction"
               menubarPath="projection/additions"
               definitionId="org.eclipse.ui.edit.text.folding.toggle"
               id="org.eclipse.jdt.ui.folding.toggle">
         </action>
      </viewerContribution>
      <viewerContribution
            targetID="#CJCompilationUnitRulerContext"
            id="org.eclipse.jdt.ui.quickdiff.CompilationUnitEditorContribution">
         <action
               label="%quickdiff.toggle.enable"
               style="push"
               definitionId="org.eclipse.quickdiff.toggle"
               helpContextId="quickdiff.toggle"
               class="org.eclipse.ui.texteditor.quickdiff.QuickDiffToggleAction"
               menubarPath="quickdiff"
               id="quickdiff.toggle">
         </action>
      </viewerContribution>    
   </extension>
   
   
  <extension point="org.eclipse.debug.core.launchConfigurationTypes">
  	<launchConfigurationType name="Caesar Application" delegate="org.caesarj.launching.CaesarLaunchConfigurationDelegate" modes="run, debug" id="org.caesarj.launching.localCaesarApplication" sourceLocatorId="org.caesarj.launching.caesarSourceLookupDirector" sourcePathComputerId="org.eclipse.jdt.launching.sourceLookup.javaSourcePathComputer" /> 
  </extension>
  <extension point="org.eclipse.debug.ui.launchConfigurationTypeImages">
    <launchConfigurationTypeImage
        icon="icons/sample.gif"
        configTypeID="org.caesarj.launching.localCaesarApplication"
        id="org.caesarj.launching.launchConfigurationTypeImage.cj_app">
    </launchConfigurationTypeImage>
  </extension>
  <extension point="org.eclipse.debug.ui.launchConfigurationTabGroups">
  	<launchConfigurationTabGroup type="org.caesarj.launching.localCaesarApplication" helpContextId="org.eclipse.jdt.debug.ui.launchConfigHelpContext.local_java_application" class="org.caesarj.launching.LocalCaesarApplicationTabGroup" id="org.caesarj.launchConfigurationTabGroup.localCaesarApplication">
 		<launchMode mode="debug" perspective="org.eclipse.debug.ui.DebugPerspective" description="Local Caesar Application (debug)" /> 
  		<launchMode mode="run" description="Local Caesar Application (run)" /> 
  	</launchConfigurationTabGroup>
  </extension>
  <extension point="org.eclipse.debug.core.sourceLocators">
  	<sourceLocator name="Caesar Source Lookup Director" class="org.caesarj.launching.CaesarSourceLookupDirector" id="org.caesarj.launching.caesarSourceLookupDirector" /> 
  </extension>
  <extension point="org.eclipse.debug.ui.launchShortcuts">
    <shortcut
        id="org.caesarj.launching.caesarShortcut"
        class="org.caesarj.launching.CaesarLaunchShortcut"
        label="Caesar Application"
        icon="icons/sample.gif"
        modes="run,debug">
            <perspective id="org.eclipse.jdt.ui.JavaPerspective"/>
            <perspective id="org.caesarj.ui.perspective.CaesarPerspective"/>
            <perspective id="org.eclipse.jdt.ui.JavaHierarchyPerspective"/>
            <perspective id="org.eclipse.jdt.ui.JavaBrowsingPerspective"/>
            <perspective id="org.eclipse.debug.ui.DebugPerspective"/>
         <contextualLaunch>
           <enablement>
             <with variable="selection">
               <count value="1"/>
               <iterate>
                 <or>
                   <test property="org.eclipse.debug.ui.matchesPattern" value="*.java"/>
                   <test property="org.eclipse.debug.ui.matchesPattern" value="*.class"/>
                   <instanceof value="org.eclipse.jdt.core.IJavaElement"/>
                 </or>
               </iterate>
             </with>
           </enablement>
  		 </contextualLaunch>
            
    </shortcut>
  </extension>
  <extension
        point="org.eclipse.core.runtime.preferences">
     <initializer class="org.caesarj.ui.preferences.CaesarPreferenceInitializerr"/>
  </extension>
     
</plugin>
